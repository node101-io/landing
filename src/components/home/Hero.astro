---
import { Image, getImage } from "astro:assets";
import { getLangFromUrl, useTranslations } from "@/i18n/utils";
import isoBadge from "@/assets/images/iso-badge.webp";
import heroBackground from "@/assets/images/hero-background.webp";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const optimizedHeroBg = await getImage({ src: heroBackground, format: "webp" });

const socialLinks = [
  { label: "GitHub", href: "https://github.com/node101-io" },
  { label: "X", href: "https://x.com/node_101" },
  { label: "LinkedIn", href: "https://www.linkedin.com/company/node101/" },
];
---

<div
  style={`background-image: url('${optimizedHeroBg.src}')`}
  class={`
    relative
    m-(--hero-margin)
    flex
    h-[calc(100dvh-var(--banner-height)-var(--hero-margin-total))]
    flex-col
    overflow-hidden
    rounded-[calc(var(--radius-4xl)+var(--hero-margin))]
    bg-cover
    bg-center
    transition-[height,margin,border-radius,padding]
    duration-300
    group-has-[#mobile-menu-toggle:checked]/menu:m-0
    group-has-[#mobile-menu-toggle:checked]/menu:h-[calc(100dvh-var(--banner-height))]
    group-has-[#mobile-menu-toggle:checked]/menu:rounded-none
    group-has-[#mobile-menu-toggle:checked]/menu:p-(--hero-margin)
    lg:group-has-[#mobile-menu-toggle:checked]/menu:m-(--hero-margin)
    lg:group-has-[#mobile-menu-toggle:checked]/menu:h-[calc(100dvh-var(--banner-height)-var(--hero-margin-total))]
    lg:group-has-[#mobile-menu-toggle:checked]/menu:rounded-4xl
    lg:group-has-[#mobile-menu-toggle:checked]/menu:p-0
  `}
>
  <section
    class={`
      flex
      flex-1
      flex-col
      items-center
      justify-center
      px-4
      py-10
      text-center
      sm:px-6
      md:px-8
    `}
  >
    <!-- <div class={`
      mb-6
      inline-flex
      items-center
      gap-1.5
      sm:mb-8
      sm:gap-2
    `}>
      <img
        src="/img/hero-subtext-icon.svg"
        alt=""
        aria-hidden="true"
        width="16"
        height="40"
        class={`
          h-6
          w-3
          sm:h-8
          sm:w-3
          md:h-10
          md:w-4
        `}
      />
      <span class={`
        text-xs
        font-medium
        text-espresso-light
        sm:text-sm
        md:text-base
      `}>
        {t('hero.badge')}
      </span>
      <img
        src="/img/hero-subtext-icon.svg"
        alt=""
        aria-hidden="true"
        width="16"
        height="40"
        class={`
          h-6
          w-3
          -scale-x-100
          sm:h-8
          sm:w-3
          md:h-10
          md:w-4
        `}
      />
    </div> -->
    <h1
      class={`
        max-w-5xl
        font-display
        text-4xl
        leading-[0.85]
        font-bold
        text-balance
        text-espresso-light
        sm:text-5xl
        md:text-6xl
        lg:text-7xl
        xl:text-8xl
      `}
    >
      {t("hero.titleLine1")}
      <span class="block">{t("hero.titleLine2")}</span>
    </h1>

    <p
      class={`
        mt-6
        max-w-md
        text-xs
        leading-relaxed
        font-normal
        text-espresso-light
        sm:mt-8
        sm:max-w-lg
        sm:text-sm
        md:max-w-xl
        md:text-base
      `}
    >
      {t("hero.description")}
    </p>
  </section>

  <div
    class={`
      absolute
      right-(--header-margin)
      bottom-(--header-margin)
      left-(--header-margin)
      flex
      items-center
      justify-between
      sm:bottom-6
      sm:items-end
    `}
  >
    <Image
      src={isoBadge}
      alt={t("hero.isoBadgeAlt")}
      class={`
        h-8
        w-auto
        sm:h-10
      `}
    />
    <nav
      class={`
        flex
        items-center
        gap-5
        text-sm
        text-espresso-light
        sm:gap-7
        sm:text-base
      `}
    >
      {
        socialLinks.map(({ label, href }) => (
          <a
            href={href}
            class={`
              transition-colors
              hover:text-primary
            `}
            target="_blank"
            rel="noopener noreferrer"
          >
            {label}
          </a>
        ))
      }
    </nav>
  </div>
</div>
