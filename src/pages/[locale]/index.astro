---
import Layout from '@/layouts/Layout.astro';
import Banner from '@/components/Banner.astro';
import Header from '@/components/header/Header.astro';
import Hero from '@/components/home/Hero.astro';
import TrustedBy from '@/components/home/TrustedBy.astro';
import Services from '@/components/home/Services.astro';
import Networks from '@/components/home/Networks.astro';
import { LOCALES } from '@/i18n/utils';

// Prerender for all locales
export const prerender = true;

export function getStaticPaths() {
  return LOCALES.map((locale) => ({
    params: { locale },
  }));
}
---

<Layout title="node101">
  <Banner server:defer>
    <div slot="fallback" class={`
      flex
      h-(--banner-height)
      w-full
      items-center
      overflow-hidden
      bg-primary
      transition-[height,opacity]
      duration-300
    `}>
      <div class={`
        flex
        flex-1
        items-center
        justify-center
      `}>
        <div class={`
          h-3
          w-48
          animate-pulse
          rounded
          bg-primary-foreground/20
        `}></div>
      </div>
      <div class="px-3">
        <div class={`
          size-3.5
          animate-pulse
          rounded
          bg-primary-foreground/20
        `}></div>
      </div>
    </div>
  </Banner>
  <div class="group/menu">
    <Header />
    <Hero />
  </div>
  <TrustedBy />
  <Services />
  <Networks server:defer>
    <div slot="fallback" class="m-(--section-margin) w-[calc(100%-var(--section-margin)*2)]">
      <div class="flex flex-col gap-8 py-12 sm:py-16 md:py-20 lg:gap-12 lg:py-24">
        <div class="h-12 w-64 animate-pulse rounded-lg bg-espresso/10"></div>
        <div class="grid grid-cols-4 gap-[4vw] lg:grid-cols-12 lg:gap-[1.4vw]">
          <div class="col-span-2 aspect-square animate-pulse rounded-[6vw] bg-espresso/5 lg:col-span-3 lg:rounded-[2vw]"></div>
          <div class="col-span-2 aspect-square animate-pulse rounded-[6vw] bg-espresso/5 lg:col-span-3 lg:rounded-[2vw]"></div>
          <div class="col-span-2 aspect-square animate-pulse rounded-[6vw] bg-espresso/5 lg:col-span-3 lg:rounded-[2vw]"></div>
          <div class="col-span-2 aspect-square animate-pulse rounded-[6vw] bg-espresso/5 lg:col-span-3 lg:rounded-[2vw]"></div>
        </div>
      </div>
    </div>
  </Networks>
</Layout>
