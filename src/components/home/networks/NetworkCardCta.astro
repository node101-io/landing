---
import { type TranslationFn } from '@/i18n/utils';

interface Props {
  t: TranslationFn;
  gridClass?: string;
}

const { t, gridClass } = Astro.props;
---

<a
  href="#"
  class:list={[
    gridClass,
    `
      group
      relative
      flex
      items-center
      justify-center
    `,
    `
      overflow-hidden
      rounded-[calc(var(--vw)*6)]
      bg-espresso
    `,
    `
      no-underline
      transition-colors
      delay-200
      duration-500
    `,
    `
      lg:rounded-[calc(var(--vw)*2)]
      lg:border-none
    `,
    `
      lg:bg-lav-border
      lg:hover:bg-espresso
      lg:hover:delay-0
    `,
  ]}
>
  {/* Mobile — static text, styled like desktop hover */}
  <span class={`
    flex
    items-center
    gap-[calc(var(--vw)*1.5)]
    px-[calc(var(--vw)*3)]
    py-[calc(var(--vw)*2)]
    text-[calc(var(--vw)*3)]
    text-cream
    lg:hidden
  `}>
    {t('common.allNetworks')}
    <img
      src="/img/arrow/arrow-right-light.svg"
      alt=""
      class={`
        h-[0.6em]
        w-auto
        -rotate-45
      `}
    />
  </span>

  {/* Desktop — marquee strip, slides up on hover */}
  <span class={`
    absolute
    inset-y-0
    left-0
    hidden
    w-max
    animate-cta-marquee
    items-center
    whitespace-nowrap
    transition-[opacity,translate]
    duration-300
    will-change-transform
    motion-reduce:animate-none
    lg:flex
    lg:group-hover:-translate-y-[10%]
    lg:group-hover:opacity-0
  `}>
    {Array.from({ length: 4 }).map(() => (
      <span class={`
        flex
        shrink-0
        items-center
        gap-[calc(var(--vw)*0.5)]
        px-[calc(var(--vw)*1)]
        text-[calc(var(--vw)*1.3)]
        text-espresso-dark
      `}>
        {t('common.allNetworks')}
        <img
          src="/img/arrow/arrow-right-dark.svg"
          alt=""
          class={`
            h-[0.6em]
            w-auto
          `}
        />
      </span>
    ))}
  </span>

  {/* Desktop — hover text, staggered letter entrance */}
  <span class={`
    pointer-events-none
    absolute
    inset-0
    hidden
    items-center
    justify-center
    lg:flex
  `}>
    <span class={`
      flex
      items-center
      overflow-hidden
      leading-tight
    `}>
      {t('common.allNetworks').split('').map((char, i) => (
        <span
          class={`
            inline-block
            translate-y-full
            text-[calc(var(--vw)*1.3)]
            text-cream
            transition-transform
            duration-300
            lg:group-hover:translate-y-0
          `}
          style={`transition-delay: ${i * 8}ms`}
        >
          {char === ' ' ? '\u00A0' : char}
        </span>
      ))}
      <span
        class={`
          ml-[calc(var(--vw)*0.5)]
          inline-block
          translate-y-full
          text-[calc(var(--vw)*1.3)]
          transition-transform
          duration-300
          lg:group-hover:translate-y-0
        `}
        style={`transition-delay: ${t('common.allNetworks').length * 8}ms`}
      >
        <img
          src="/img/arrow/arrow-right-light.svg"
          alt=""
          class={`
            h-[1em]
            w-[0.8em]
            object-contain
          `}
        />
      </span>
    </span>
  </span>
</a>
